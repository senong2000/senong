---
title: 从零开始设计产品搜索功能
description: 
date: 2023-09-13
lang: zh
duration: ∞
type: product
---
[[toc]]

> 文章源来自 “人人都是产品经理” - Brinkey

## 概述

当产品顺利落地并且发展到一定阶段时不可避免地变得复杂。对于功能复杂化的问题，产品会通过各式各样的导航栏、菜单栏以及更多的卡片去进行收纳，方便让用户更快地找到想要的功能

但是仅仅把功能分门别类放到不同的“收纳箱”中不够，产品需要一种更直接的方式，方便让用户快速找到自己想要的内容，产品内搜索应运而生

<input style="background:#F3F3F3;padding:16px;border-radius:8px;" />
<button style="background:#F3F3F3;padding:16px;border-radius:8px;">确定</button>

一个搜索框加上一个确定按钮，就能让用户到达这个产品最偏远的角落，正因为如此，搜索也成为了产品重要的流量入口之一

搜索功能的体验反映出产品是否具有用户意识，好的产品通过搜索能够帮助用户快速找到结果，节约时间成本，搜索还能成为一个可观的流量入口，所以会出现什么标题党之类的吸引流量。很多人第一时间不会去百度搜索而是去小红书

另一方面，搜索也是用户数据的重要来源。在设计好数据埋点的前提下能够成为后续的更新迭代提供更多的行为数据。

## 搜索功能设计

### 一、搜索存在的意义

对于架构比较简单的产品，通过列表、图标、文字等提示符就能找到目标。当应用界面的内容过多，过多的提示就会成为用户的干扰，使用户很难仅通过视觉找到目标

**一般有两种做法去解决：一是筛选，二是搜索**

筛选可以有效版主用户缩小查找范围，如购买APP中一些“万人团”之类的，一看就简单便宜。同理，音乐软件中的榜单功能等等

- 在一家咖啡厅想给女朋友拍照，于是打开小红书搜索关键词 “咖啡厅拍照技巧”
- 路上不知道该换乘哪条地铁，该从哪个出口出站，于是打开高德搜索目的地
- 打开美团想要买菜，但找不到对应功能，于是搜索 “买菜” 找到了相近的功能
- 发现某只股票涨停了，通过搜索代码直接找到了当天的涨停股
- 想买秋装，但是不了解穿搭和款式，在淘宝搜索 “男装”、“穿搭” 几个关键词

有时候需求是明确的，比如搜索拍照技巧，搜索目的地；需求有时是模糊的，比如搜索穿搭等。与之对应的，搜索时键入的内容是精准或杂乱的，存在不确定性。对我来说，搜索的意义在于：

**有时候需求是明确的，比如搜索拍照技巧，搜索目的地；需求有时是模糊的，比如搜索穿搭等。与之对应的，搜索时键入的内容是精准或杂乱的，存在不确定性。对我来说，搜索的意义在于：**

### 二、搜索入口设计

搜索入口是用户于搜索功能发生交互的位置，对于大多数APP而言设计相对简单，搜索框加上按钮即构成前端展示要素。但产品设计会根据不同的使用场景、功能权重去判断搜索入口的位置应该放在哪里

1. 底部Tab栏

将Tab栏置于应用底部，意味着在用户使用场景中搜索行为频繁发生，需求十分强烈。将搜索作为独立的一极入口很大程度强度了搜索权重，也为功能提供了很大的拓展空间。大部分将搜索置于底部Tab栏的应用，搜索功能都是流量入口

- 微博：搜索（发现）入口承载了微博热搜、热聊
- App Store 搜索入口是主要的产品竞价排名广告收入的来源之一
- Spotify：搜索入口承载了所有音乐类型的榜单，可能会出现刷榜情况

> Tab 栏搜索入口只适合对搜索需求极高或者搜索已经成为核心流量入口的产品。

2. 顶部搜素栏

将搜索置于页面顶部是最常见的方式。这样做的方式是在视觉上非常醒目，也符合用户的视觉浏览动线。同底部Tab栏，顶部搜索栏也是产品内重要的流量入口

顶部搜索栏的设计是4中搜索形式中最复杂的，它的构成包括了搜索栏、占位符、图标等元素

<input placeholder="搜索" style="background:#F3F3F3;padding:16px;border-radius:8px;" /><button style="background:#F3F3F3;padding:16px;border-radius:8px;">搜索</button>

**图标**
根据不同的业务场景，产品搜索框中的图表各有不同
比如：

- 淘宝的扫一扫、拍照
- 网易云音乐的听歌识别
- 高德地图的语音查找

都是为了让用户更便捷地搜索到想要找到的

**占位符**
除了图标，占位符也可以起到推荐内容作用，轮播类似的文字

用户通过占位符中的文字广告进行搜索越高频，那么占位符的商业价值也就越高

能够让搜索框更加客制化，同时提高搜索转化率

**搜索按钮**
优化用户搜索的体验，除了搜索时键盘自带的搜索阿牛，在搜索框右侧也会展示搜索按钮。从视觉上，提醒用户是一个搜索功能。

**选择器**
对于搜索类型和属性较多的产品，产品的搜索还会增加前置条件让用户在设定完成之后进行搜索。比如美团搜索的地区选择，写成搜索酒店时的地址选择等等，可以理解为是筛选和搜索功能的叠加，这样便于用户得出更精准的结果，利于提高用户使用的成功率

1. 放大镜搜索栏

在产品顶部以“放大镜”样式的icon展示搜索功能，通常意味着当前产品或者当前页面的搜索行为并非特别频繁，需要用到搜索功能都是刚需，用户的操作成本几乎可以忽略不计。搜素功能相对弱化的同时，导航按的空间也得以保留，此时搜索功能应让位给其他更重要的功能导航栏或者功能icon.
比如:

- 个人页面
- 动态页,留空给顶部tabs栏

4. 隐藏式搜索栏
隐藏式的搜索入口几乎不在任何 App 内见过：一个功能即便优先级再低也需要曝光而非隐藏。这种设计最常见于手机系统的下拉或上划交互，唤起后可以搜索手机内的全局应用、功能等。

### 三、常见的搜索方式

最常见的搜索方式有四种，分别是文本、语音、拍照和扫描（扫一扫）。根据用户不同的使用场景，这四种方式各均能发挥各自的重要作用。

- 文字搜索是最常见的形式。
- 语音搜索多用于老弱群体，其次为车载产品或导航产品。
- 拍照和扫描即可高级科技产物，用于电商、知识类的目标，快速查找一些无从下手的物品。

## 搜索流程

搜索的进行主要分为3个阶段，分别为搜索前、搜索中、搜索后。这3个阶段分别对应搜索功能的静止状态、点击触发状态、确认搜索状态。对功能状态再进行细化，可以得到一个框架清晰的搜索流程。

### 一、激活搜索

1. 光标聚焦
用户进入激活搜索状态，表明用户需要通过搜索来获取想要的内容。搜索功能设计的第一个目标就是<span style="color:red">聚焦</span>。

用户再点击搜索框的时候就会唤起底部，输入框内闪烁蓝色光标。这个设计让视觉更聚焦于搜索框而不受其他内容的干扰，底部唤起的键盘也有主语减少屏幕内的干扰要素。

2. 衍生能力

基于搜索这一需求，搜索功能衍生出了搜索记录、搜索发现和搜索榜单的能力。从产品视角上看，我们需要提供更多的途径和选择让用户快速触达目标。

一般的互联网产品在点击搜索框进入搜索功能页时，页面会展示
- 搜索记录
- 搜索发现
- 搜索榜单
大部分的榜单和推荐主要是为了商业运营的目的而存在。
比如外卖、电商平台，其推荐和榜单功能并不意味着要展示“好”的产品。

### 二、输入关键字

1. 反馈方式

第一种方式：实时匹配输入结果，对搜索精确度高，考验着产品的响应速度。

第二种方式：关键词联想，对精确度要求较低，讲求一个模糊匹配，搜索近似的内容

- 饿了么：匹配唯一结果
- 小红书：匹配相近结果
- 飞书：匹配唯一结果
- 知乎：匹配相近结果

根据业务场景不同，搜索方式不同。

类似于下小红书、知乎等咨询社区类产品，推荐流量比较重要

而对于饿了么和飞书，针对性比较强，用户只要想找到某些东东

2. 搜索目的

除了业务场景，每个用户搜索目的都不一样

- 模糊搜索（一对多）：用户搜索时目标不太明确，想在未知内容中探索信息。用户对所需信息的主题和关键词未完全理清，希望去发现和搜索，难以结构化地表达所要解决的问题
- 精确搜索（一对一）：用户搜索时有明确的目标，想在已知内容中快速定位所需信息。输入关键词反映的是用户想获取的信息主题

**饿了么**
> 推荐外卖不明确
> 搜索商家、商品明确

**飞书**
> 文件夹目录不明确
> 最近浏览、直接搜索明确

**知乎**
> 浏览热榜、推荐不明确
> 搜索关键词明确

3. 联想模式

1）提供关联结果

用户输入关键词的时候会触发展示关联结果，这种做法在内容平台被广泛使用，比如下图在小红书搜索 citywalk 出现的关联内容。

这种关联结果展示能够有效地降低用户输入成本，提升搜索效率。从用户获取网络资讯和热点的流程上看，大部分用户对于寻求问题答案的途径都大致相似，比如某天在豆瓣发现了一个大瓜，会上微博或小红书搜索。从发现内容到搜索内容，这就是一种用户路径。

2）商业化运营

联想模式在商业化的运用也十分常见。在外卖软件搜索 “咖啡”，除了展示商品，产品运营还会在其中穿插营销内容和推荐产品，满足有营销诉求的商家。

一个是用户搜索时，可以给到提示的作用，方便找到想要的信息。另一个是用户输入的时候不用一个字一个字去敲，减少输入成本。对于平台来说，联想功能可以用来做一些营销推广的活动。

在设计这种包含输入词的交互的时候，最好结合产品本身的目的和目标用户的使用场景来思考，这样可以让用户体验更顺畅。

### 三、解析关键词

除了产品设计，在搜索功能中最重要的一环是搜索的逻辑。

用户会输入什么，会不会输错，一般会有哪些错误，对于错误应该如何解决？对这些疑问的解答构成了搜索功能中的核心环节。

为了更准确的理解用户想要搜什么，搜索系统通常会添加多种解析规则来增加系统对于用户输入内容的理解。比如预处理、分词、改写等方式。对关键词的解析越精确，搜索功能更能为用户带来价值和满足。

**关键词的解析流程**

1. 预处理

对关键词进行字符转换、删除、截断等处理，将关键词进行标准化和简化

- 拼音转文字
示例：输入 “chanpinjingli” 时会转化为 “产品经理”
场景：在 B 端 CRM 系统中搜索用户姓名一直都是一件令人苦恼的事情，尤其是当用户的姓名较为生僻的时候。这个时候通过拼音搜索能够快速定位到用户

- 大小写切换
示例：输入 “B1-A156-t2” 时会转化为 “b1-A1-P510”（负1层 – A1区域 – 510号车位）
场景：在 ERP 系统（企业资源计划）中通常会有数量众多企业物资信息。以商场为例，对于一些固定资产，如商铺、车位，甚至是卫生间的马桶都有各自的编号。通过大小写字母混排的方式来查找资产的方式较为复杂，而将输入的内容统一转换为小写字母就会更易查找。

- 繁简体转换
示例：输入 “産品經理” 时会转为为 “产品经理”，反之亦然
场景：通常适用于涉及到繁体字书写的地区。

- 无意义字符移除
示例：忽略特殊字符，包括 emoji、颜文字、空格、数字符号、语气词等
场景：在没有使用字符输入限制的情况下，输入无意义字符一般都会影响输出结果，导致结果为空。在一些文档搜索的场景中，作为特殊字符的空格也会导致搜索失败。目前许多社区都有开源的《停用词库》可供调用，结合实际的业务场景就可以梳理出一套较为适合的词库。

- 长度截断
示例：输入字符超过上限，截断上限字符后面输入的内容
场景：搜索引擎通常会常用分词的方式进行搜索。如果输入一个词组较多的长句，那么对于搜索匹配的压力会大大加强，长度截断更考虑搜索调用产生的负载。目前百度的输入上限为 18 个汉字，Google 为 12 个词。

2. 分词

一般出现无法完全匹配的情况时会采用分词的形式，将一个句子或一个词组拆分为多个 Term。Term 可以是单字或词组，Term 的作用在于它能和数据库形成匹配。

目前，大多数字产品采用的是基于词典的分词方式，即维护一个分词词库。如果输入的关键词能在词库中找到对应词组，则可以召回该词组相关的内容。但是基于词库分词存在一定维护成本，例如出现新词时需要手动添加等。

以飞书搜索作为例子。在飞书文档中搜索 “数据库”，会出现包含 “数据库” 关键词的文档。但在飞书文档中搜索 “据库”，则无结果。“据库”作为一个词组既没有命中分词数据库，也没有文档匹配内容。但如果将词组隔开，我们还是能搜索到对应结果。

3. 改写

改写指的是将用户输入的关键词调整为能和数据库匹配的内容。这对搜索功能提出了新的要求：**作为产品经理需要知道用户可能会以什么样的方式进行输入并及时调整。**

改写具体可以分为三种方式：

- 纠错：改正用户的拼写，将错误的关键词纠正为正确的关键词
- 归一：将不同的语言表达但意思相同的词语统一转换为标准词语
- 扩展：对输入的关键词进行意义扩展，生成与其内容或行为语义相关的词语列表（关联搜索）

1）纠错
在百度输入 “appla” 系统会纠正为 “apple”，并以纠正词进行搜索。这是纠错在搜索中的运用。

在腾讯的搜索技术文档中，鹅厂的技术同学将搜索的错误类型分为Non-word Error和Real-word Error两种，分别指 “不存在数据库中的错误字符” 和 “由多个汉字组成的错误语句” 两种类型。

2）归一

多个搜索目的 都是关于价格内容，统一指向一个地址

如：
- 华为mate60 多少钱
- 华为mate60 售价
- 华为mate60 怎么卖

3）拓展
拓展在上文已经有相关描述，参见 “输入关键词 – 联想模式”，此处不再重复说明。

### 四、召回
将用户的关键词经过解析，与数据库中的内容进行匹配的行为称之为召回。这个过程需要后端利用倒排索引技术，建立关键词和数据库内容之间的关联，以提高搜索查询效率。

简单来说，就是构建清晰的目录结构，便于快速查找目标内容。查询速度与召回环节的倒排索引建设质量直接相关。倒排索引建设得越合理。查询速度就越快。

### 五、排序
当搜索结果不止一个的时候，通常需要进行排序。排序存在规则，合理的规则能够有效地展示关联结果，也能给企业带来不菲的营销利润，如搜索引擎的竞价排名功能。

一般来说搜索有两种排序思路。一种是根据匹配程度和参数进行排序。比方说在饿了么搜索我历史购买奶茶的记录，那么首先匹配的是关键词 “茶”，其次会按照时间倒序（参数）进行排序。

1. 匹配度 + 数据参数

关键字 + 时间倒序

2. 算法打分

满足某些参数，权重高者优先展示

比如说微信的“搜一搜”、今日头条、知乎等内容产品，会根据阅读量、互动量、点击率等多项指标来设计权重，并给每一篇文章进行打分，权重高者优先展示。

### 六、展示结果

1. 搜索成功

在完成一系列的复杂流程之后，终于来到了搜索的最后一个环节，结果展示。这是用户唯一看到的内容（实际上没有用户会在意你的技术流程啊哈哈哈），所以搜索结果的展示需要力求清晰。

目前搜索引擎都会基于不同的关键字展示不同的结果。在算法和用户画像的加持下也就形成了过去互联网产品渴望实现的 “千人千面” 能力。

如同上文中，搜索 “华为 mate60 售价” 会展示华为商城的跳转链接一样。搜索商品、人物、风景、概念都会出现不一样的搜索结果。

在游戏资讯类产品来说，展示结果相当重要。比如 Tap Tap 和网易大神。根据用户搜索的关键词不同，结果的呈现也各具特色。

2. 搜索失败

用户搜索并不能保证每次总是成功，在搜索内容和搜索规则无法形成匹配的情况下，需要考虑出现搜索失败的情况。一般来说，针对搜索失败场景的产品设计有三种类型：

- 乱码：可以理解为没有针对搜索结果出现失败进行设计，一般较少出现
- 分词：在无法精确匹配的前提下，搜索关键词中拆分出来单词和词组进行搜索
- 空态：展示一个搜索失败页，告知用户没有搜索到相关内容

### 七、小结

每一个产品的业务场景不同，功能重要性不同。

在产品设计中更应该强调做一个好的产品，能满足用户需求的产品，而不是做完美的产品。